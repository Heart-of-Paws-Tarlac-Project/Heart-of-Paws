<nav class="bg-transparent border-gray-200">
  <div
    class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
  >
    <a href="#" class="flex items-center space-x-3 rtl:space-x-reverse">
      <span
        class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white"
      >
        Heart of Paws
      </span>
    </a>

    <!-- Desktop Navigation -->
    <ul class="hidden md:flex space-x-6">
      <li>
        <a
          routerLink="/rescues"
          class="text-gray-900 dark:text-white hover:underline"
        >
          Rescues
        </a>
      </li>
      <li>
        <a
          routerLink="/how-to-help"
          class="text-gray-900 dark:text-white hover:underline"
        >
          How To Help
        </a>
      </li>
      <li>
        <a
          routerLink="/about-us"
          class="text-gray-900 dark:text-white hover:underline"
        >
          About Us
        </a>
      </li>
      <li>
        <a
          routerLink="/contact-us"
          class="text-gray-900 dark:text-white hover:underline"
        >
          Contact Us
        </a>
      </li>

      <!-- Avatar Dropdown (Desktop) -->
      <li *ngIf="isAuthenticated" class="relative">
        <button
          (click)="toggleDropdown()"
          class="flex items-center focus:outline-none"
        >
          <img
            class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600"
            [src]="userProfileSrc"
            alt="User Avatar"
          />
        </button>

        <!-- Dropdown Menu -->
        <div
          *ngIf="isDropdownOpen"
          class="absolute mt-2 right-0 bg-white border rounded-lg shadow-lg dark:bg-gray-700"
        >
          <ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
            <li>
              <a
                (click)="navigateToUserProfile()"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white cursor-pointer"
              >
                Profile
              </a>
            </li>
            <li>
              <a
                (click)="logout()"
                class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white cursor-pointer"
              >
                Logout
              </a>
            </li>
          </ul>
        </div>
      </li>

      <li *ngIf="!isAuthenticated">
        <a
          routerLink="/login"
          class="text-gray-900 dark:text-white hover:underline"
        >
          Login
        </a>
      </li>
      <li *ngIf="!isAuthenticated">
        <a
          routerLink="/register"
          class="text-white bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded-lg text-center"
        >
          Sign up
        </a>
      </li>
    </ul>

    <!-- Hamburger Button (Mobile) -->
    <button
      (click)="toggleMenu()"
      type="button"
      class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
    >
      <span class="sr-only">Open main menu</span>
      <svg
        class="w-5 h-5"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 17 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M1 1h15M1 7h15M1 13h15"
        />
      </svg>
    </button>

    <!-- Sidebar Menu (Mobile) -->
    <div
      [ngClass]="{
        'translate-x-0': isMenuOpen,
        '-translate-x-full': !isMenuOpen
      }"
      class="fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg transition-transform transform md:hidden p-5 z-50 ease-in-out duration-500"
    >
      <!-- Close Button -->
      <button
        (click)="closeMenu()"
        class="absolute top-4 right-4 text-gray-500 dark:text-gray-400"
      >
        âœ–
      </button>

      <!-- Navigation Links -->
      <ul class="flex flex-col space-y-4 mt-8">
        <li>
          <a
            routerLink="/rescues"
            (click)="handleNavigation()"
            class="block py-2 px-3 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
          >
            Rescues
          </a>
        </li>
        <li>
          <a
            routerLink="/how-to-help"
            (click)="handleNavigation()"
            class="block py-2 px-3 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
          >
            How To Help
          </a>
        </li>
        <li>
          <a
            routerLink="/about-us"
            (click)="handleNavigation()"
            class="block py-2 px-3 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
          >
            About Us
          </a>
        </li>
        <li>
          <a
            routerLink="/contact-us"
            (click)="handleNavigation()"
            class="block py-2 px-3 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
          >
            Contact Us
          </a>
        </li>

        <!-- Avatar Dropdown (Mobile) -->
        <li *ngIf="isAuthenticated" class="relative">
          <button
            (click)="toggleDropdown()"
            class="flex items-center w-full text-left focus:outline-none px-3 py-2"
          >
            <img
              class="w-10 h-10 rounded-full border border-gray-300 dark:border-gray-600"
              [src]="userProfileSrc"
              alt="User Avatar"
            />
            <span class="ml-3 text-gray-900 dark:text-white">Profile</span>
          </button>

          <!-- Dropdown Menu -->
          <div
            *ngIf="isDropdownOpen"
            class="mt-2 w-full bg-white border rounded-lg shadow-lg dark:bg-gray-700"
          >
            <ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
              <li>
                <a
                  (click)="navigateToUserProfile(); handleNavigation()"
                  class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white cursor-pointer"
                >
                  Profile
                </a>
              </li>
              <li>
                <a
                  (click)="logout(); handleNavigation()"
                  class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white cursor-pointer"
                >
                  Logout
                </a>
              </li>
            </ul>
          </div>
        </li>

        <li *ngIf="!isAuthenticated">
          <a
            routerLink="/login"
            (click)="handleNavigation()"
            class="block py-2 px-3 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
          >
            Login
          </a>
        </li>
        <li *ngIf="!isAuthenticated">
          <a
            routerLink="/register"
            (click)="handleNavigation()"
            class="text-white bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded-lg text-center"
          >
            Sign up
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
